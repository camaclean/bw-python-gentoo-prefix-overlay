diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9c871de..64f5595 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,14 +1,16 @@
 CMAKE_MINIMUM_REQUIRED(VERSION 2.6 FATAL_ERROR)
 CMAKE_POLICY(VERSION 2.6)
+PROJECT(TorcHSparse C)
 
 IF(NOT Torch_FOUND)
-  FIND_PACKAGE(Torch REQUIRED)
+  FIND_PACKAGE(TH REQUIRED)
 ENDIF()
 
 IF(NOT TH_LIBRARIES)
   SET(TH_LIBRARIES "TH")
 ENDIF(NOT TH_LIBRARIES)
 MESSAGE(STATUS "TH_LIBRARIES: ${TH_LIBRARIES}")
+INCLUDE_DIRECTORIES("${TH_INCLUDE_DIR}")
 
 IF(NOT THS_INSTALL_BIN_SUBDIR
     OR NOT THS_INSTALL_LIB_SUBDIR
@@ -72,19 +74,15 @@ SET_TARGET_PROPERTIES(THS PROPERTIES
   VERSION   ${THS_SO_VERSION}
   SOVERSION ${THS_SO_VERSION})
 
-INSTALL(TARGETS THS
-  RUNTIME DESTINATION "${THS_INSTALL_BIN_SUBDIR}"
-  LIBRARY DESTINATION "${THS_INSTALL_LIB_SUBDIR}"
-  ARCHIVE DESTINATION "${THS_INSTALL_LIB_SUBDIR}")
-
-
-INSTALL(FILES
+SET(THS_HDRS
   THS.h
   THSGenerateAllTypes.h
   THSGenerateFloatTypes.h
   THSGenerateIntTypes.h
-  THSTensor.h
-  DESTINATION "${THS_INSTALL_INCLUDE_SUBDIR}/THS")
+  THSTensor.h)
+
+SET_TARGET_PROPERTIES(THS PROPERTIES
+  PUBLIC_HEADER "${THS_HDRS}")
 
 INSTALL(FILES
   generic/THSTensor.c
@@ -92,3 +90,18 @@ INSTALL(FILES
   generic/THSTensorMath.c
   generic/THSTensorMath.h
   DESTINATION "${THS_INSTALL_INCLUDE_SUBDIR}/THS/generic")
+
+INSTALL(TARGETS THS
+  EXPORT THSTargets
+  RUNTIME DESTINATION "${THS_INSTALL_BIN_SUBDIR}"
+  LIBRARY DESTINATION "${THS_INSTALL_LIB_SUBDIR}"
+  ARCHIVE DESTINATION "${THS_INSTALL_LIB_SUBDIR}"
+  PUBLIC_HEADER DESTINATION "${THS_INSTALL_INCLUDE_SUBDIR}/THS")
+
+# Create THSConfig.cmake
+EXPORT(TARGETS THS FILE "${CMAKE_CURRENT_BINARY_DIR}/THSTargets.cmake")
+EXPORT(PACKAGE TorcHSparse)
+SET(THS_INCLUDE_DIR "${CMAKE_INSTALL_PREFIX}/${THS_INSTALL_INCLUDE_SUBDIR}/THS")
+CONFIGURE_FILE(THSConfig.cmake.in "${PROJECT_BINARY_DIR}/THSConfig.cmake")
+INSTALL(FILES "${PROJECT_BINARY_DIR}/THSConfig.cmake" DESTINATION "${THS_INSTALL_CMAKE_SUBDIR}")
+INSTALL(EXPORT THSTargets DESTINATION "${THS_INSTALL_CMAKE_SUBDIR}")
diff --git a/THSConfig.cmake.in b/THSConfig.cmake.in
index e69de29..e08db20 100644
--- a/THSConfig.cmake.in
+++ b/THSConfig.cmake.in
@@ -0,0 +1,14 @@
+# Find the THS includes and library
+#
+# THS_INCLUDE_DIR -- where to find the includes
+# THS_LIBRARIES -- list of libraries to link against
+# THS_FOUND -- set to 1 if found
+
+SET(THS_FOUND 1)
+SET(THS_INCLUDE_DIR "@THS_INCLUDE_DIR@")
+
+if(NOT TARGET THS AND NOT TorcHSparse_BINARY_DIR)
+   include("${CMAKE_INSTALL_PREFIX}/${THS_INSTALL_CMAKE_SUBDIR}/THSTargets.cmake")
+endif()
+
+SET(THS_LIBRARIES THS)
